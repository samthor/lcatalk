<!DOCTYPE html>
<html lang="en">
<head>
  <title>The Web Is Dead! Long Live The Web!</title>
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <link rel="stylesheet" type="text/css" href="main.css" media="screen" />
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Roboto:300,400,500,600" rel="stylesheet" />
  <link rel="manifest" href="manifest.json" />
  <script type="module">

    import './elements.js';
    import './hashchange.js';

    if (navigator.serviceWorker) {
      navigator.serviceWorker.register('/sw.js').then(() => {
        console.info('sw ok!');
      });
    }

  </script>
</head>
<body>

  <div hidden>
    <!-- preloader -->
    <img src="bg-white.png" />
    <img src="bg-gray.png" />
    <img src="bg-mixed.png" />
  </div>

  <live-viewport>
    <live-talk id="talk" active="0" heading="The Web Is Dead! Long Live The Web!">

<!-- Intro -->
<article slot="slide" id="slide-intro" feature>
  <div class="big-mid">
    <img src="icon-256.png" width="128" height="128" />
    <main style="font-size: 24px;">
      <h1>The Web Is Dead!</h1>
      <h1>Long Live The Web!</h1>

      <h2>Sam Thorogood <small>@samthor</small></h2>
    </main>
  </div>
</article>

<article slot="slide">
<!-- In the 90's, everyone could make a website. I even had one about Quake mods. -->
<div class="big-mid vert">
  <img src="assets/dragotchi.png" width="840" style="margin-bottom: -100px;" />
</div>
</article>

<article slot="slide">
<!-- Ajax gives us the experiences we _expect_, today -->
<div class="big-mid">
  <img src="assets/ajax.png" width="800" />
</div>
</article>

<article slot="slide">
<!-- spawned a user content revolution with these amazing sites -->
<div class="big-mid">
  <img src="assets/django.png" width="600" />
</div>
</article>

<article slot="slide">
<!-- But also these really complex experiences like Maps, Slack etc. -->
<div class="big-mid">
  <img src="assets/maps.png" width="800" />
</div>
</article>

<article slot="slide">
<h2>Mobile Happened</h2>

<ul>
  <li>"There's an app for that"â€”native capabilities have made apps sexy</li>
  <li>Mobile has easily overtaken desktop</li>
</ul>

<div data-appear="1" class="big-mid">
  <img src="assets/web-is-dead.png" width="800" style="margin-top: 50px;" />
</div>

</article>


<article slot="slide">
<div class="big-point">
  <div style="display: flex; align-items: center;">
    <h1 style="margin-right: 0.25em">ZERO</h1>
    <div>
      apps installed per month
    </div>
  </div>
  <aside>Source: comScore MobiLens, U.S., Age 13+, 3 Month Average Ending June 2017</aside>
</div>
</article>

<article slot="slide">
<div class="big-point">
  <div style="display: flex; align-items: center;">
    <div>&hellip;</div>
    <h1 style="margin: 0 0.25em; color: #c33">ONE</h1>
    <div>
      app installed per month
    </div>
  </div>
  <aside>Source: Tune, "No, Americans do not install an average of zero apps per month", July 2016</aside>
</div>
</article>

<article slot="slide">
<div class="big-point">
  <div style="display: flex; align-items: center;">
    <h1 style="margin-right: 0.25em">78%</h1>
    <div>
      of time is spent in a users' top three apps
    </div>
  </div>
  <aside>Source: comScore Mobile Metrix (Custom), U.S., Age 18+, June 2017</aside>
</div>
</article>

<article slot="slide">
<div class="big-point" style="align-items: center; width: 90%">
<img src="assets/walls.png" width="800" />
</div>
</article>

<article slot="slide">
<img src="assets/twitter.png" width="800" />
</article>

<article slot="slide">
<img src="assets/twitter.png" width="800" />
<img src="assets/twitter-framed.png" width="600" style="position: absolute; right: 100px;" />
</article>

<article slot="slide">
<h2>So if</h2>

<ul>
  <li>You are developing something</li>
  <li>... for other humans to consume (e.g. "content")</em></li>
  <li>... for other humans to use (e.g. "app")</em></li>
</ul>
</article>

<article slot="slide">
<h2>The web is</h2>

<ul>
  <li>The most open platform we have</li>
  <li>The easiest way to share with <em>anyone</em></li>
</ul>
</article>

<article slot="slide">
  <div class="big-mid">
  <img src="assets/friction.png" />
</div>
</article>

<article slot="slide">
<h2>Build Better Websites</h2>

<ul>
  <li>Capabilities have caught up with <em>reach</em></li>
  <ul class="extra-margin">
    <li>Think native APIs, performance</li>
  </ul>
  <li>Evergreen browsers provide a great base</li>
  <ul class="extra-margin">
    <li>... to <em>progressively enhance</em> your users' experience</li>
  </ul>
</ul>

</article>

<article slot="slide" feature>
<h2>What's Old Is New Again</h2>

<ul>
  <li>... when rounded down, no-one wants to install your native app</li>
  <li>... URLs still mean something</li>
  <li>... the Web is not dead</li>
</ul>

</article>

<!-- talk about Sam -->

<article slot="slide">

<h2>Sam Thorogood</h2>
<ul>
  <li>Developer Programs Engineer at Google</li>
</ul>
<h3>Projects</h3>
<ul>
  <li>YouTube videos, blog posts</li>
  <li>Misc web polyfillsâ€”<code>dialog</code>, <code>inert</code></li>
  <li>Emojityper.com</li>
  <li>&hellip;</li>
</ul>

</article>

<article slot="slide" id="slide-site" feature>
<div class="center">
  <h2>Santa Tracker</h2>
  <img src="assets/santa-site.png" width="900" style="margin-bottom: -220px;" />
</div>
</article>

<article slot="slide" id="slide-santavideo" feature>
<div class="center">
  <h2>Santa Tracker</h2>
  <video src="assets/elfski.mov" height="240" autoplay muted loop></video>
  <video src="assets/snowball.mov" height="240" autoplay muted loop></video>
</div>
</article>

<article slot="slide" feature>
<div class="center">
  <img src="assets/santa-pwa.png" width="800" />
</div>
</article>

<!-- introduce concepts -->

<article slot="slide">
<h2>Progressive Web Apps</h2>
<ul>
  <li>We just made this phrase up</li>
  <ul class="extra-margin">
    <li>It's a conversation pieceâ€”the "other option" vs sinking $$ into an app</li>
    <li>Good to search for</li>
  </ul>
  <li>Web experiences with <em>app-like features</em></li>
</ul>
</article>

<article slot="slide">
<h2>Service Worker</h2>
<ul>
  <li>PWAs are made possible by Service Worker</li>
  <li>Supported on Chrome, Firefox, Edge (soonâ„¢) and Safari (soonâ„¢)</li>
</ul>
</article>

<article slot="slide">
<p>TODO: service worker diagram</p>
</article>

<article slot="slide" id="slide-fire" feature>
<div style="float: right">
  <h1>ðŸ”¥</h1>
</div>

<h1><em>F</em>ast</h1>
<h1><em>I</em>ntegrated</h1>
<h1><em>R</em>eliable</h1>
<h1><em>E</em>ngaging</h1>

</article>

<!-- talk about technical parts -->

<article slot="slide">
<h2 class="fire">Fast</h2>
<div class="big-point">
  <div style="display: flex; align-items: center;">
    <h1 style="margin-right: 0.25em">20-50%</h1>
    <div>of users will abandon your site after 3s loading</div>
  </div>
</div>
</article>

<article slot="slide">
<h2 class="fire">Integrated</h2>

<div class="big-point">
  <ul>
    <li>Launch from Home Screen</li>
    <li>Visible in task list</li>
    <ul class="extra-margin">
      <li>... or as a window</li>
    </ul>
    <li>Access to native hardware via APIs</li>
  </ul>
</div>

</article>

<article slot="slide">
<h2>Webapps? On my Home Screen?</h2>
<ul>
  <li>iOS famously pioneered then ignored this</li>
  <li>We say "Add to Home Screen", but really mean "prompt to ..."</li>
</ul>
</article>

<article slot="slide">
<h2>Web App Manifest</h2>
<pre class="box">
{
  "name": "The Web Is Dead! Long Live The Web!",
  "short_name": "Web ðŸ’€ðŸ‘‘",
  "icons": [
    {"src": "icon-256.png", "sizes": "256x256"}
  ],
  "display": "standalone",
  "start_url": "/",
  "orientation": "landscape",
  "theme_color": "#36474f",
  "background_color": "#fff"
}
</pre>
</article>

<article slot="slide">
<img src="assets/manifest.png" align="right" style="z-index: 100; position: relative;" height="440" />
<h2>Web App Manifest</h2>
<pre class="box" style="opacity: 0.25;">
{
  "name": "The Web Is Dead! Long Live The Web!",
  "short_name": "Web ðŸ’€ðŸ‘‘",
  "icons": [
    {"src": "icon-256.png", "sizes": "256x256"}
  ],
  "display": "standalone",
  "start_url": "/",
  "orientation": "landscape",
  "theme_color": "#36474f",
  "background_color": "#fff"
}
</pre>
</article>


<article slot="slide">
<h2>Integrated also means</h2>
<ul>
  <li>Using modern APIs where possible</li>
  <ul>
    <li>e.g., Web Payments API, Media APIs, ...</li>
    <li>Not everything is here yet</li>
  </ul>
</ul>
</article>

<article slot="slide">
<h2>Reliable: Service Worker</h2>
<ul>
  <li>We cache assets and work offline via a <em>Service Worker</em></li>
  <li>This is a JavaScript file which:</li>
  <ol>
    <li>Has an event lifecycle, including <code>install</code>, <code>activate</code> and <ode>deactivate</code> events</li>
    <li>Can proxy any network request made by your site</li>
    <li>Gets automatically <em>installed</em> on supported browsers</li>
  </ol>
</ul>
</article>

<article slot="slide">
<h2>Service Worker</h2>

<pre class="box">
self.addEventListener('fetch', (event) => {
  if (event.request.url === `https://yoursite.com/`) {
    <strong>event.respondWith(new Response(`I'm a fake index page!`));</strong>
  }
});
</pre>
</article>

<article slot="slide">
<h2>Service Worker</h2>

<pre class="box">
self.addEventListener('install', (event) => {
  event.waitUntil(
    self.caches.open('lcatalk').then((cache) => {
      <strong>return cache.addAll(['/', '/code.js', &hellip;]);</strong>
    });
  );
});

<span style="opacity: 0.25">self.addEventListener('fetch', (event) => {
  if (event.request.url === `https://yoursite.com/`) {
    &hellip;
</span>
</pre>
</article>

<article slot="slide">
<h2>Strategies</h2>

<ul>
  <li>Can cache everything (simple static site)</li>
  <li>Can cache core HTML, assets etc, load articles at runtime (news sites)</li>
  <li>Cache some, indicate what's missing (wikis)</li>
</ul>
</article>
<article slot="slide">

<h2>Imperative</h2>
<ul>
  <li>The <em>Service Worker</em> is an imperative scriptâ€”it can handle requests in any way</li>
  <ul>
    <li>Via the network</li>
    <li>Via a cache</li>
    <li>By racing the two requests</li>
    <ul>
      <li>(yes, the cache on disk is sometimes slower than the network.)</li>
    </ul>
    <li>Generating a dynamic/fake responseâ€”think stub images</li>
  </ul>
</ul>

<ul>
  <li>It still handles HTTP requestsâ€”you can't "answer it again later", e.g., cache then (slow) network</li>
  <li>Maybe with liberal application of client-side JavaScript</li>
</ul>

</article>

<article slot="slide" feature>
<h2>This site works offline</h2>
<p>Demo time!&mdash;Load the <a href="/foo">/foo</a> handlerâ€”and open DevTools</p>
</article>

<article slot="slide">
<h2>Typical strategy</h2>
<p>TODO: graph</p>
</article>

<article slot="slide">
<h2>Proxy vs dynamic content in JS</h2>
<ul>
  <li>Service Worker allows for an extreme approach:</li>
  <ul>
    <li>Run minimal JavaScript and allow the Service Worker to generate whole sites for youâ€”think templating engines inside the JS</li>
  </ul>
  <li>But... you probably just want to cache static content and load the rest with JavaScript, potentially putting that into a different, normal browser cache</li>
  <li>TODO: put into picture</li>
  <li>Not everyone has support</li>
</ul>
</article>

<article slot="slide">

<h2>Engaging: Push Notifications</h2>
<p>TODO: button to trigger one, maybe on phone?</p>

</article>

<article slot="slide">

<h2>... but every site asks for it</h2>
<ul>
  <li>We're not happy either</li>
  <li>Please don't do this</li>
  <li>Acceptance rate is much, much lower than when based on a user action (e.g. button click "Notify me")</li>
</ul>

</article>

<article slot="slide" feature>
<h2>The web can do what?!</h2>
</article>

<article slot="slide">
<h2>Media APIs</h2>

<div>
  <button id="toggle_camera" style="font-size: 1em">Camera</button>
</div>
<video width="500" height="300" id="camera_stream" autoplay></video>
<script>
toggle_camera.addEventListener('click', (ev) => {
  ev.stopPropagation();
  if (camera_stream.src) {
    window.URL.revokeObjectURL(camera_stream.src);
    camera_stream.src = '';
    return;
  }
  navigator.getUserMedia({video: {facingMode: 'user'}}).then((stream) => {
    camera_stream.src = window.URL.createObjectURL(stream);
    camera_stream.play();
  });
});
</script>

</article>

<article slot="slide">
<h2>Web Share</h2>
</article>

<article slot="slide" feature>
<h2>Lighthouse</h2>
</article>

    </live-talk>
  </live-viewport>

<!--
<a href="https://rego.linux.conf.au/schedule/presentation/81/">LCA</a>
-->

</body>
</html>